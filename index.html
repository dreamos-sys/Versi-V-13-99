<!DOCTYPE html>
<html lang="id">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0, maximum-scale=1.0, user-scalable=no">
    <title>DREAM OS v13.9.9.9 ‚Äî The Power Soul of Shalawat</title>
    
    <!-- Supabase -->
    <script src="https://cdn.jsdelivr.net/npm/@supabase/supabase-js@2"></script>
    
    <style>
        :root {
            --win-blue: #005a9e;
            --win-grey: #f0f0f0;
            --quantum-glow: #00f2ff;
            --shadow-deep: rgba(0, 90, 158, 0.4);
            --emerald: #00C897;
            --gold: #FFD700;
            --dark-bg: #0a0f2c;
            --danger: #ef4444;
        }
        
        * { box-sizing: border-box; margin: 0; padding: 0; }
        
        body { 
            font-family: 'Segoe UI', Tahoma, sans-serif; 
            background: radial-gradient(circle at top, #001f3f 0%, #000814 50%, #000000 100%); 
            color: #fff; 
            margin: 0; 
            overflow: hidden; 
            height: 100vh;
        }
        
        /* LOGIN OVERLAY WITH EYE TOGGLE */
        #login-overlay {
            position: fixed;
            top: 0;
            left: 0;
            width: 100%;
            height: 100%;
            background: rgba(10, 15, 44, 0.98);
            backdrop-filter: blur(10px);
            display: flex;
            justify-content: center;
            align-items: center;
            z-index: 1000;
        }
        
        .login-box {
            background: rgba(255, 255, 255, 0.05);            border: 2px solid var(--emerald);
            border-radius: 20px;
            padding: 30px;
            width: 90%;
            max-width: 400px;
            text-align: center;
        }
        
        .bismillah-trigger {
            font-size: 2.5rem;
            color: var(--gold);
            cursor: pointer;
            margin-bottom: 15px;
            transition: transform 0.3s;
        }
        
        .bismillah-trigger:hover {
            transform: scale(1.1);
        }
        
        .pass-input-wrapper {
            position: relative;
            width: 100%;
            margin: 15px 0;
        }
        
        .pass-input {
            width: 100%;
            padding: 12px 40px 12px 15px;
            background: rgba(0, 0, 0, 0.3);
            border: 2px solid var(--emerald);
            border-radius: 10px;
            color: white;
            font-size: 1rem;
            text-align: center;
        }
        
        .eye-toggle {
            position: absolute;
            right: 15px;
            top: 50%;
            transform: translateY(-50%);
            cursor: pointer;
            color: var(--emerald);
            font-size: 1.5rem;
        }
        
        .login-btn {
            background: var(--emerald);
            color: white;            border: none;
            padding: 14px;
            border-radius: 10px;
            font-weight: bold;
            font-size: 1rem;
            cursor: pointer;
            width: 100%;
            margin-top: 10px;
            transition: background 0.3s;
        }
        
        .login-btn:hover {
            background: #00b386;
        }
        
        .taskbar {
            position: fixed; 
            bottom: 0; 
            width: 100%; 
            height: 48px;
            background: linear-gradient(180deg, rgba(20,20,20,0.95) 0%, rgba(0,0,0,0.98) 100%);
            backdrop-filter: blur(15px);
            display: flex; 
            align-items: center; 
            padding: 0 15px; 
            border-top: 2px solid var(--quantum-glow);
            box-shadow: 0 -5px 20px rgba(0, 242, 255, 0.2);
            z-index: 999;
        }
        
        .window {
            width: 95%; 
            max-width: 1200px; 
            height: 82vh;
            background: linear-gradient(135deg, #ffffff 0%, #f5f5f5 100%);
            color: #333; 
            margin: 15px auto;
            border-radius: 12px; 
            overflow: hidden; 
            display: flex; 
            flex-direction: column;
            box-shadow: 0 10px 60px rgba(0, 242, 255, 0.4), 0 0 0 1px var(--quantum-glow);
            animation: windowFadeIn 0.5s ease-out;
        }
        
        @keyframes windowFadeIn {
            from { opacity: 0; transform: translateY(-20px); }
            to { opacity: 1; transform: translateY(0); }
        }
                .title-bar {
            background: linear-gradient(180deg, #e8e8e8 0%, #d0d0d0 100%);
            padding: 12px 15px;
            display: flex; 
            justify-content: space-between; 
            align-items: center;
            font-weight: bold; 
            border-bottom: 2px solid #bbb;
            box-shadow: 0 2px 5px rgba(0,0,0,0.1);
        }
        
        .main-content { 
            flex: 1; 
            overflow: hidden; 
            padding: 20px; 
            background: #fff;
        }
        
        /* DASHBOARD ICON GRID (8 ICONS) */
        .dashboard-grid {
            display: grid;
            grid-template-columns: repeat(4, 1fr);
            gap: 15px;
            padding: 20px;
        }
        
        @media (max-width: 768px) {
            .dashboard-grid {
                grid-template-columns: repeat(2, 1fr);
            }
        }
        
        .icon-box {
            background: rgba(240, 240, 240, 0.7);
            border: 1px solid #ddd;
            border-radius: 12px;
            padding: 20px 10px;
            text-align: center;
            cursor: pointer;
            transition: all 0.3s;
            height: 150px;
            display: flex;
            flex-direction: column;
            justify-content: center;
            align-items: center;
        }
        
        .icon-box:hover {
            background: linear-gradient(135deg, #005a9e 0%, #003d6b 100%);
            color: white;            transform: translateY(-5px);
            box-shadow: 0 10px 25px rgba(0, 90, 158, 0.3);
        }
        
        .icon-emoji {
            font-size: 2.5rem;
            margin-bottom: 10px;
        }
        
        .icon-label {
            font-weight: bold;
            font-size: 0.9rem;
        }
        
        .emergency-box {
            background: linear-gradient(135deg, #d32f2f, #b71c1c);
            color: white;
            border: 2px solid white;
        }
        
        .emergency-box .icon-emoji {
            font-size: 3rem;
        }
        
        /* SIDEBAR STYLES */
        .sidebar {
            width: 240px; 
            background: linear-gradient(180deg, #1a1a1a 0%, #0d0d0d 100%);
            padding: 20px; 
            border-right: 2px solid #333;
            box-shadow: 5px 0 15px rgba(0,0,0,0.3);
        }
        
        .sidebar h4 {
            color: var(--quantum-glow);
            margin-top: 0;
            font-size: 13px;
            text-transform: uppercase;
            letter-spacing: 1px;
        }
        
        .stats {
            margin-top: 15px;
            padding: 10px;
            background: rgba(0, 242, 255, 0.05);
            border-radius: 6px;
            border: 1px solid rgba(0, 242, 255, 0.2);
        }
        
        .stats div {            font-size: 10px;
            color: #999;
            margin: 5px 0;
        }
        
        .stats span {
            color: var(--quantum-glow);
            font-weight: bold;
        }
        
        body.dark-mode {
            background: radial-gradient(circle at top, #0a0a0a 0%, #000000 100%);
        }
        
        body.dark-mode .window {
            background: linear-gradient(135deg, #1a1a1a 0%, #0d0d0d 100%);
            color: #e0e0e0;
        }
        
        body.dark-mode .icon-box {
            background: rgba(30, 30, 30, 0.7);
            border-color: #444;
        }
    </style>
</head>
<body>

<div id="login-overlay">
    <div class="login-box">
        <div class="bismillah-trigger" onclick="tapBismillah()">Ô∑Ω</div>
        <div style="color: var(--gold); margin-bottom: 10px; font-family: 'Amiri', serif; font-size: 1.1rem;">
            THE POWER SOUL OF SHALAWAT
        </div>
        <div style="margin: 15px 0; font-size: 1.8rem;">üëã</div>
        
        <div class="pass-input-wrapper">
            <input type="password" id="passInput" class="pass-input" placeholder="Masukkan Password...">
            <span class="eye-toggle" onclick="togglePassword()">üëÅÔ∏è</span>
        </div>
        
        <div style="font-size: 0.8rem; color: rgba(255,255,255,0.7); margin: 10px 0; text-align: left;">
            <p style="margin: 3px 0;">üì± Device: Redmi Note 9 Pro</p>
            <p style="margin: 3px 0;">üìç Zero Latitude: -6.3980¬∞ S, 106.8242¬∞ E</p>
            <p style="margin: 3px 0; color: var(--emerald);">üí° Tap 3x "Ô∑Ω" untuk hint password</p>
        </div>
        
        <button class="login-btn" onclick="handleLogin()">MASUK KE SISTEM</button>
    </div>
</div>
<div class="window" id="app-window" style="display:none;">
    <div class="title-bar">
        <span>üí† DREAM OS v13.9.9.9 ‚Äî DASHBOARD UTAMA</span>
        <div style="display:flex; gap:10px; align-items: center;">
            <span style="font-size: 11px; color: var(--win-blue);">[ ISO 9001:2026 ]</span>
            <span style="cursor: pointer;">[-] [‚ñ°] [X]</span>
        </div>
    </div>
    
    <div style="display:flex; flex: 1; overflow: hidden;">
        <div class="sidebar">
            <h4>‚ö° SELAMAT DATANG</h4>
            <p id="user-welcome" style="color: var(--gold); font-weight:bold; margin:10px 0;"></p>
            
            <h4 style="margin-top:20px;">üìä STATISTIK REALTIME</h4>
            <div class="stats">
                <div>Sarana Terdaftar: <span id="total-sarana">22</span></div>
                <div>Laporan Hari Ini: <span id="today-reports">0</span></div>
                <div>Status Sistem: <span id="system-status" style="color: var(--emerald);">ONLINE</span></div>
            </div>
            
            <div style="margin-top:20px; padding:10px; background:rgba(255,255,255,0.05); border-radius:8px; border:1px solid #333;">
                <p style="font-size:9px; color:var(--emerald); line-height:1.4;">
                    System Heartbeat:<br>
                    <b>The Power Soul of Shalawat</b><br>
                    Redmi Note 9 Pro ‚Ä¢ Safe Core 5KM
                </p>
            </div>
        </div>

        <div class="main-content">
            <div class="dashboard-grid">
                <!-- 8 ICONS DASHBOARD -->
                <div class="icon-box" onclick="showTab('sarana')">
                    <div class="icon-emoji">üìä</div>
                    <div class="icon-label">LAPORAN SARANA & K3</div>
                </div>
                
                <div class="icon-box" onclick="showTab('booking')">
                    <div class="icon-emoji">üóìÔ∏è</div>
                    <div class="icon-label">BOOKING SARANA (22 UNIT)</div>
                </div>
                
                <div class="icon-box" onclick="showTab('security')">
                    <div class="icon-emoji">üõ°Ô∏è</div>
                    <div class="icon-label">LAPORAN KEAMANAN 24 JAM</div>
                </div>
                
                <div class="icon-box" onclick="showTab('ceklis')">
                    <div class="icon-emoji">‚úÖ</div>                    <div class="icon-label">CEKLIS HARIAN CS</div>
                </div>
                
                <div class="icon-box" onclick="showTab('stok')">
                    <div class="icon-emoji">üì¶</div>
                    <div class="icon-label">STOK & ALAT CS/TAMAN</div>
                </div>
                
                <div class="icon-box" onclick="showTab('maintenance')">
                    <div class="icon-emoji">üîß</div>
                    <div class="icon-label">FORM MAINTENANCE</div>
                </div>
                
                <div class="icon-box" onclick="showTab('inventaris')">
                    <div class="icon-emoji">üè¢</div>
                    <div class="icon-label">INVENTARIS</div>
                </div>
                
                <div class="icon-box" onclick="showTab('gudang')">
                    <div class="icon-emoji">üè≠</div>
                    <div class="icon-label">GUDANG</div>
                </div>
                
                <!-- EMERGENCY BUTTON -->
                <div class="icon-box emergency-box" onclick="triggerEmergency()" style="grid-column: span 4;">
                    <div class="icon-emoji">üö®</div>
                    <div class="icon-label" style="font-size:1.2rem; font-weight:bold;">SITUASI DARURAT - TEKAN HANYA UNTUK KRISIS</div>
                </div>
            </div>
            
            <!-- TAB CONTENTS (PLACEHOLDERS) -->
            <div id="sarana-tab" class="tab-content" style="display:none;">
                <h2>LAPORAN SARANA & K3</h2>
                <p>Form laporan sarana dan keselamatan kerja</p>
            </div>
            
            <div id="booking-tab" class="tab-content" style="display:none;">
                <h2>BOOKING SARANA</h2>
                <p>Form booking 22 unit sarana Al-Fikri</p>
            </div>
            
            <div id="security-tab" class="tab-content" style="display:none;">
                <h2>LAPORAN KEAMANAN 24 JAM</h2>
                <p>Form laporan keamanan dan patroli</p>
            </div>
            
            <div id="ceklis-tab" class="tab-content" style="display:none;">
                <h2>CEKLIS HARIAN CS</h2>
                <p>Form ceklis kebersihan dan ketersediaan CS</p>
            </div>            
            <div id="stok-tab" class="tab-content" style="display:none;">
                <h2>STOK & ALAT CS/TAMAN</h2>
                <p>Form inventaris stok alat kebersihan</p>
            </div>
            
            <div id="maintenance-tab" class="tab-content" style="display:none;">
                <h2>FORM MAINTENANCE</h2>
                <p>Form laporan perbaikan sarana</p>
            </div>
            
            <div id="inventaris-tab" class="tab-content" style="display:none;">
                <h2>INVENTARIS</h2>
                <p>Form inventaris gedung dan perlengkapan</p>
            </div>
            
            <div id="gudang-tab" class="tab-content" style="display:none;">
                <h2>GUDANG</h2>
                <p>Form stok gudang umum</p>
            </div>
        </div>
    </div>
</div>

<div class="taskbar">
    <button style="background:linear-gradient(135deg, #005a9e, #003d6b); border:none; color:white; font-weight:bold; cursor:pointer; padding: 8px 16px; border-radius: 6px; box-shadow: 0 2px 5px rgba(0,90,158,0.3);">‚äû START</button>
    <div style="margin-left: 20px; font-size: 12px; color: #00f2ff;">
        <b>ISO Verified</b> | System Heartbeat: <b>The Power Soul of Shalawat</b>
    </div>
    <div style="margin-left: auto; font-family: 'Consolas', monospace; color: var(--quantum-glow); font-weight: bold;" id="digital-clock"></div>
</div>

<script>
    // üîê MULTIPLE PASSWORD SYSTEM
    const PASSWORD_MAP = {
        '4dm1n_AF6969@00': { role: 'admin', name: 'Admin' },
        'user_@1234': { role: 'user_umum', name: 'User Umum' },
        'LHPSsec_AF2025': { role: 'security', name: 'Security Officer' },
        'CHCS_AF_@003': { role: 'ceklis', name: 'Petugas CS' },
        'SACS_AF@004': { role: 'stok', name: 'Stok & Alat CS' },
        'M41n_4F@234': { role: 'maintenance', name: 'Maintenance' },
        '4dm1n_6969@01': { role: 'inventaris', name: 'Inventaris' },
        '4dm1n_9696@02': { role: 'gudang', name: 'Gudang' },
        'Mr.M_Architect_2025': { role: 'master_key', name: 'Master Key' },
        'd4N4umum_AF@1112': { role: 'user_umum', name: 'User Umum Alt' }
    };
    
    let bismillahTapCount = 0;
    
    // üëÅÔ∏è SHOW/HIDE PASSWORD TOGGLE    function togglePassword() {
        const input = document.getElementById('passInput');
        const toggle = document.querySelector('.eye-toggle');
        
        if (input.type === 'password') {
            input.type = 'text';
            toggle.textContent = 'üôà';
        } else {
            input.type = 'password';
            toggle.textContent = 'üëÅÔ∏è';
        }
    }
    
    // ü§≤ BISMILLAH TRIGGER (3 TAPS)
    function tapBismillah() {
        bismillahTapCount++;
        if (bismillahTapCount >= 3) {
            document.getElementById('passInput').value = '4dm1n_AF6969@00';
            bismillahTapCount = 0;
            document.querySelector('.bismillah-trigger').innerHTML = '‚úÖ';
            setTimeout(() => {
                document.querySelector('.bismillah-trigger').innerHTML = 'Ô∑Ω';
            }, 1000);
        }
    }
    
    // üîë HANDLE LOGIN WITH ROLE-BASED ACCESS
    function handleLogin() {
        const password = document.getElementById('passInput').value.trim();
        const user = PASSWORD_MAP[password];
        
        if (user) {
            // Save user role and name
            localStorage.setItem('userRole', user.role);
            localStorage.setItem('userName', user.name);
            
            // Update UI
            document.getElementById('user-welcome').textContent = `Halo, ${user.name}!`;
            
            // Show app window
            document.getElementById('login-overlay').style.display = 'none';
            document.getElementById('app-window').style.display = 'flex';
            
            // Initialize system
            initializeSystem();
            showNotification(`‚úÖ Selamat datang, ${user.name}!`, 'success');
        } else {
            showNotification('‚ùå Password salah!', 'error');
        }
    }    
    // üö™ SHOW TAB BASED ON ROLE
    function showTab(tabName) {
        // Hide all tabs
        document.querySelectorAll('.tab-content').forEach(tab => {
            tab.style.display = 'none';
        });
        
        // Show selected tab (if exists)
        const tab = document.getElementById(`${tabName}-tab`);
        if (tab) tab.style.display = 'block';
        
        // Role-based access control can be added here
    }
    
    // üö® EMERGENCY PROTOCOL
    function triggerEmergency() {
        if (confirm('üö® ANDA YAKIN INGIN MENGAKTIFKAN PROTOKOL DARURAT?\n\nIni akan mengirim notifikasi ke semua petugas keamanan dan pimpinan.')) {
            const reason = prompt('Masukkan alasan darurat:');
            if (reason) {
                // In real implementation, this would send to Supabase
                document.body.style.animation = 'emergency-pulse 0.5s infinite';
                setTimeout(() => {
                    document.body.style.animation = '';
                }, 5000);
                
                showNotification('üö® PROTOKOL DARURAT AKTIF! Notifikasi terkirim ke semua unit.', 'emergency');
            }
        }
    }
    
    // üîî NOTIFICATION HELPER
    function showNotification(message, type) {
        alert(message);
    }
    
    // ‚è∞ CLOCK INITIALIZATION
    function initializeSystem() {
        setInterval(() => {
            document.getElementById('digital-clock').textContent = new Date().toLocaleTimeString('id-ID');
        }, 1000);
    }
</script>

<style>
    @keyframes emergency-pulse {
        0% { background-color: #000; }
        50% { background-color: #450a0a; }
        100% { background-color: #000; }
    }</style>
</body>
</html>
